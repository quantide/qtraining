---
title:
author:
date:
output:
  html_document:
    self_contained: no
---

```{r setup, echo=FALSE, message=FALSE, results='hide'}
require(tidyverse) 
require(knitr) 
options(width=80)
opts_knit$set(message=FALSE)
opts_knit$set(warning=FALSE)
opts_chunk$set(list(dev = 'png', fig.cap='', fig.show='hold', dpi=100, fig.width=7, fig.height=7, fig.pos='H!'))#, fig.path="figures/lm-"))
opts_knit$set(root.dir="./data")
show_solution <- if (exists("show_solution_mk")){
  show_solution_mk
} else {
  FALSE
}


# ATTENZIONE: leggere nota dentro show-solution.R
```



## `filter()` and its friends
Note: all the exercises of this section are based on the `flights` dataset.


```{r, message = FALSE}
require(tidyverse)
require(nycflights13)
```



### Exercise 1
Select all flights which delayed more than 1000 minutes at departure.

```{r, echo = show_solution, eval = show_solution}
flights %>% filter(dep_delay > 1000)
```



### Exercise 2
Select all flights which delayed more than 1000 minutes at departure or at arrival.

```{r, echo = show_solution, eval = show_solution}
flights %>% filter(dep_delay > 1000 | arr_delay > 1000)

# alternatively
# flights %>% filter(dep_delay > 1000, arr_delay > 1000)
```



### Exercise 3
Select all flights which took off from "EWR" and landed in "IAH" on Christmas Day.

```{r, echo = show_solution, eval = show_solution}
flights %>% filter(origin == "EWR" & dest == "IAH" & month == 12 & day ==25)

# altenatively
# flights %>% filter(origin == "EWR", dest == "IAH", month == 12, day ==25)

```



### Exercise 4
Select the first five flights in this dataset.

```{r, echo = show_solution, eval = show_solution}
flights %>% slice(1:5)
```


### Exercise 5
Select the last ten flights in this dataset.

```{r, echo = show_solution, eval = show_solution}
flights %>% slice((n()-9):n())
```



### Exercise 6
Extract information about distance for all flights which delayed more than 1000 minutes at departure.

```{r, echo = show_solution, eval = show_solution}
flights %>% 
  filter(dep_delay > 1000) %>%
  select(distance)
```

