---
title: 
author:
date: 
output:
  html_document:
    self_contained: no
---

```{r setup, echo=FALSE, message=FALSE, results='hide'}
require(tidyverse) 
require(knitr) 
options(width=80)
opts_chunk$set(list(dev = 'png', fig.cap='', fig.show='hold', dpi=100, fig.width=7, fig.height=7, fig.pos='H!'))#, fig.path="figures/lm-"))
opts_knit$set(root.dir="./data")
show_solution <- if (exists("show_solution_mk")){
  show_solution_mk
} else {
  FALSE
}


# ATTENZIONE: leggere nota dentro show-solution.R
```


Grouping data
================================

## `group_by()`
Note: all the exercises of this section are based on the `flights` dataset.


```{r}
library(tidyverse)
library(nycflights13)
```


### Exercise 1
Calculate number of flights, minimum, mean and maximum delay at arrival for flights by month.

```{r, echo = show_solution, eval = show_solution}
flights %>% 
  group_by(month) %>%
  summarise(n_flights = n(),
    min_arr_delay = min(arr_delay, na.rm = T),
    mean_arr_delay = mean(arr_delay, na.rm = T),
    max_arr_delay = max(arr_delay, na.rm = T))
```




### Exercise 2
Calculate number of flights, mean delay at departure and arrival for flights by origin.

```{r, echo = show_solution, eval = show_solution}
flights %>% 
  group_by(origin) %>%
  summarise(n_flights = n(),
    min_arr_delay = min(arr_delay, na.rm = T),
    mean_arr_delay = mean(arr_delay, na.rm = T),
    max_arr_delay = max(arr_delay, na.rm = T))
```




### Exercise 3
Calculate the number of flights that go to each possible destination.

```{r, echo = show_solution, eval = show_solution}
flights %>% 
  group_by(dest) %>%
  summarise(n_flights = n())
```




### Exercise 4
Calculate the number of flights for each day. Save the result in a data frame called `per_day`.

```{r, echo = show_solution, eval = show_solution}
per_day <- flights %>% 
  group_by(year, day, month) %>%
  summarise(n_flights = n())
```



### Exercise 5
By exploiting `per_day`, calculate the number of flights for each month. Save the result in a data frame called `per_month`.

```{r, echo = show_solution, eval = show_solution}
per_month <- flights %>% 
  group_by(month) %>%
  summarise(n_flights = n())
```



### Exercise 6
Calculate the mean daily number of flights per month.

```{r, echo = show_solution, eval = show_solution}
per_month %>% 
  group_by(month) %>%
  summarise(mean_n_flights = mean(n_flights))
```


