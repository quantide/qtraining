---
title:
author:
date:
output:
  html_document:
    self_contained: no
---

```{r setup, echo=FALSE, message=FALSE, results='hide'}
require(tidyverse) 
require(knitr) 
options(width=80)
opts_chunk$set(list(dev = 'png', fig.cap='', fig.show='hold', dpi=100, fig.width=7, fig.height=7, fig.pos='H!'))#, fig.path="figures/lm-"))
opts_knit$set(root.dir="./exercises/data")
show_solution <- if (exists("show_solution_mk")){
  show_solution_mk
} else {
  FALSE
}


# ATTENZIONE: leggere nota dentro show-solution.R
```


Tidy data with `tidyr`
================================

## `tidyr`


```{r}
library(tidyverse)
```


### Exercise 1
Consider the following dataset:


```{r}
heartrate_wide <- data.frame(
  name = c("Aldo", "Giovanni", "Giacomo"),
  surname = c("Baglio", "Storti", "Poretti"),
  morning = c(67, 80, 64),
  afternoon = c(56, 90, 50)
)
heartrate_wide
```


It represents the heart rate measured on three patients in the morning and in the afternoon. The dataset is in the wide format: change it to the long format through a proper `tidyr` function. Save the result in a data frame and call it `heartrate_long`.

```{r, echo = show_solution, eval = show_solution, cache=FALSE}
heartrate_long <- gather(heartrate_wide, key = "when", value = "value" , 3:4)          
```



### Exercise 2
Starting from `heartrate_long`, come back to a dataset in a wide format through a proper `tidyr` function. The result should be obviously equal to `heartrate_wide`.

```{r, echo = show_solution, eval = show_solution, cache=FALSE}
spread(heartrate_long, key = when, value = "value")          
```


### Exercise 3
Consider the dataset `heartrate_wide` and unite name and surname of the patients in a unique column through a proper `tidyr` function. Save the result in a new data frame called `heartrate_united`.

```{r, echo = show_solution, eval = show_solution, cache=FALSE}
heartrate_united <- heartrate_wide %>% 
  unite(name_surname, name, surname)          
```



### Exercise 4
Starting from `heartrate_united`, come back to a dataset where name and surname are in two different columns through a proper `tidyr` function. The result should be obviously equal to `heartrate_wide`.


```{r, echo = show_solution, eval = show_solution, cache=FALSE}
heartrate_united %>% 
  separate(name_surname, c("name", "surname"))          
```


