---
title:
author:
date:
output:
  html_document:
    self_contained: no
---

```{r setup, echo=FALSE, results='hide', message=FALSE}
library(knitr) 
options(width=80)
opts_chunk$set(list(dev = 'png', fig.cap='', fig.show='hold', dpi=100, fig.width=7, fig.height=7, fig.pos='H!'))#, fig.path="figures/lm-"))
source("r/show-solution.R")
# ATTENZIONE: leggere nota dentro show-solution.R
```

Tidy data with `tidyr`
================================

## `tidyr`

```{r require, results='hide', message=FALSE}
library(dplyr)
library(tidyr)
library(nycflights13)
```


### Exercise 1
Consider the following dataset:

```{r ex1_intro, echo=TRUE, eval=TRUE}
heartrate_wide <- data.frame(
  name = c("Aldo", "Giovanni", "Giacomo"),
  surname = c("Baglio", "Storti", "Poretti"),
  morning = c(67, 80, 64),
  afternoon = c(56, 90, 50)
)
heartrate_wide
```

It represents the heart rate measured to three patients in the morning and in the afternoon. The dataset is in the wide format: change it to the long format through a proper `tidyr` function. Save the result in a data frame and call it `heartrate_long`.

```{r ex1, echo=show_solution, eval=show_solution}
(heartrate_long <- heartrate_wide %>%
   gather(key = time, value = heartrate, morning:afternoon))
```


### Exercise 2
Starting from `heartrate_long`, come back to a dataset in a wide format through a proper `tidyr` function. The result should be obviously equal to `heartrate_wide`.

```{r ex2, echo=show_solution, eval=show_solution}
heartrate_long %>% spread(time, heartrate)
```


### Exercise 3
Consider the dataset `heartrate_wide` and unite name and surname of the patients in a unique column through a proper `tidyr` function. Save the result in a new data frame called `heartrate_united`.

```{r ex3, echo=show_solution, eval=show_solution}
(heartrate_united <- heartrate_wide %>%
   unite(col = complete_name, name, surname, sep = " "))
```


### Exercise 4
Starting from `heartrate_united`, come back to a dataset where name and surname are in two different columns through a proper `tidyr` function. The result should be obviously equal to `heartrate_wide`.

```{r ex4, echo=show_solution, eval=show_solution}
heartrate_united %>%
  separate(col = complete_name, into = c("name","surname"))
```

