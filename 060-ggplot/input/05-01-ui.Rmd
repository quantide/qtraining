---
title: "Building the User Interface"
output: html_document
---

```{r options, include=FALSE, purl=FALSE}
knitr::opts_chunk$set(echo = TRUE, eval = FALSE, fig.pos = 'H', fig.width = 4, fig.height = 3)
options(width = 108)
```

## Introduction


In this section you will learn how to populate the _ui_, i.e we will add elements to the UI. 

As already mentioned, the _ui_ is that part of the Shiny App that contains the instructions on the layout of the app and how you interact with the it; here you need to indicate where you want your plots to be showed, where you want to include a drop down menu, how many tabs you want, etc.

Note that we will be building the whole user interface just by passing comma-separated arguments into the `fluidPage()` function presented in the previous sections. 


Step by step, we will introduce some basic and essential visual elements and we will then complicate the structure. Remember that this is just a draft of your Shiny App and if you think of any additional feature, you can add it.


## Rendering text

One of the first things you would like to show is some text. You may want to add is a title or just as plain text.

### Starting with an empty page

```{r shiny-empty, eval = FALSE}
library(shiny)

ui <- fluidPage()
server <- function(input, output) {}

shinyApp(ui = ui, server = server)
```

### Adding a title

Let us start by adding a title to the web page. Shiny allows you to do so with the function `titlePanel()`.  `titlePanel()` not only adds a visible big title-like text to the top of the page, but it also sets the “official” title of the web page. This means that when you look at the name of the tab in the browser, you’ll see this title.


```{r shiny-title, eval = FALSE}

ui <- fluidPage(
  titlePanel("Comic Characters Data")
)

shinyApp(ui = ui, server = server)
```

### Adding plain text

If you also want to pass regular text, the web page will also allow render unformatted text.


```{r shiny-text, eval = FALSE}

ui <- fluidPage(
  titlePanel("Comic Characters"),
  "Here is a visualisation of Comic Characters Data"
)

shinyApp(ui = ui, server = server)
```


You can also format your text nicer, by using Shiny functions that are wrappers around HTML tags that format text. This means that you do not need to learn HTML, you can just use the Shiny function and they will do the rest! 

Here is a list of some of them:

* `h1()` for a top-level header
* `h2()` for a secondary header
* `strong()` for bold text 
* `em()` for italic 
* `br()` for line break
* `a()` for a hyperlink

And here is an example of use:

```{r shiny-text2, eval = FALSE}

ui <- fluidPage(
  titlePanel("Comic Characters"),
  em("Here is a visualisation of Comic Characters Data")
)

shinyApp(ui = ui, server = server)
```


## Add a template

So far content was added just one below the other, without any fancier layout organisation. However, you may want to organise your output into multiple columns/panels, so that, for example, some text is on the left and the output is on the right, or whatever else.


### `fluidPage()`

If you want to lay out elements horizontally, you can just divide the available horizontal space into equal parts (by default) and lay out the elements one next to the other.

You may also customise the size of each part by customiseing the argument `cellWidths` of the `splitLayout()` function:

```{r shiny-splitLayout1, eval = FALSE}
ui <- fluidPage(
  titlePanel("Comic Characters"),
  em("Here is a visualisation of Comic Characters Data"),
  splitLayout(cellWidths = c("25%", "75%"),
    em("one plot goes here"),
    em("another plot goes here")
  )
)

shinyApp(ui = ui, server = server)
```

### `sidebarLayout()`

When you work with inputs and outputs, one idea of layout, may be, for example to have a sidebar containing inputs and then the main area typically containing the output. 

The `sidebarLayout()` function allows you to do so: 

```{r shiny-sidebar1, eval = FALSE}
ui <- fluidPage(
  titlePanel("Comic Characters"),
  em("Here is a visualisation of Comic Characters Data"),
  sidebarLayout(
    sidebarPanel("our inputs will go here"),
    mainPanel("the results will go here")
  )
)

shinyApp(ui = ui, server = server)
```

Note that the default is that the main area occupies 2/3 of the horizontal width, although you can further customise it by setting the parameter `width` of the function `mainPanel()`:


```{r shiny-sidebar2, eval = FALSE}
ui <- fluidPage(
  titlePanel("Comic Characters"),
  em("Here is a visualisation of Comic Characters Data"),
  sidebarLayout(
    sidebarPanel("our inputs will go here"),
    mainPanel("the results will go here", width = 4)
  )
)

shinyApp(ui = ui, server = server)
```


## Creating tabset panels

If you have lots of different outputs to display, you may like to split the outputs into different "pages" you can navigate through. Here we see how you can use `tabsetPanel()` or `navlistPanel()`.


### `tabsetPanel()`

`tabsetPanel()` creates a tabset that contains `tabPanel` elements. Tabsets do exactly what we are looking for: they divide output into multiple independently viewable sections. So, for example, if we want to show a plot and some summary statistics, we could use the `tabsetPanel()` function inside the `fluidPage()`:


```{r shiny-tabsetPanel}

ui <- fluidPage(
  titlePanel("Comic Characters"),
  em("Here is a visualisation of Comic Characters Data"),
    mainPanel(tabsetPanel(
      tabPanel("Plot"),
      tabPanel("Summary")
    )
  )
)

shinyApp(ui = ui, server = server)
```

And as usual, if you run the app, you should get the expected output: in this case two tabsets called Plot and Summary.

### `navlistPanel()`

Another way to achive the creation of many different panels, is through `navlistPanel()` function. It creates a navigation list panel that provides a list of links on the left which navigate to a set of tabPanels displayed to the right. We can try and do the same that we did for `tabsetPanel()` to see the difference:


```{r shiny-navlistPanel}

ui <- fluidPage(
  titlePanel("Comic Characters"),
  navlistPanel(
    "",
    tabPanel("Plot"),
    tabPanel("Summary")
  )
)

shinyApp(ui = ui, server = server)
```



## Shinydashboard

As mentioned, shinydashboard naturally allows for a given layout. So, let us go into further details with it.

The `shinydashboard` structure suggests that the first thing we should do is to give a title to the app:

```{r shinydashboard1}
library(shiny)
library(shinydashboard)

ui <- dashboardPage(
  dashboardHeader(title = "Comic characters"),
  dashboardSidebar(),
  dashboardBody()
) 
server <- function(input, output) { }
 
shinyApp(ui, server)
```

Differently from `fluidPage()`, in order to add components to the main page, we add boxes in the body. Boxes will have a content although for now, we will leave them blank:

```{r shinydashboard2}
ui <- dashboardPage(
  dashboardHeader(title = "Basic dashboard"),
  dashboardSidebar(),
  dashboardBody(
    fluidRow(
      box(),
      box()
    )
  )
)

shinyApp(ui, server)
```

For now, these boxes will be empty, and later on, when we add outputs placeholders, we will come back to it.

There is one additional part that can be customised, that is the `dashboardSidebar()`. Here we are asked to add differnt tabpanels:


```{r shinydashboard3}
ui <- dashboardPage(
  dashboardHeader(title = "Basic dashboard"),
  dashboardSidebar(
  	sidebarMenu(
  		menuItem("Plot", tabName = "plot", icon = icon("th")),
  		menuItem("Summary", tabName = "summary", icon = icon("th"))
  	)
  ),
  dashboardBody(
    fluidRow(
      box(),
      box()
    )
  )
)

shinyApp(ui, server)
```


In the body, add tabItems with corrsponding values for `tabName` so that the final app looks like this:


```{r shinydashboard4}

ui <- dashboardPage(
    dashboardHeader(title = "Comic characters Data"),
## Sidebar content
  dashboardSidebar(
    sidebarMenu(
      menuItem("Plot", tabName = "plot", icon = icon("th")),
      menuItem("Summary", tabName = "summary", icon = icon("th"))
    )
  ),

## Body content
  dashboardBody(
    tabItems(
      # First tab content
      tabItem(tabName = "plot",
        fluidRow(
          box(),
          box()
        )
      ),

      # Second tab content
      tabItem(tabName = "summary",
        h2("Some output")
      )
    )
  )
)

server <- function(input, output) { }
 
shinyApp(ui, server)  
```

