
# Data Objects




## Data frames

**Data frames** are the primary data structure in R. A data frame is a table, in which each column contains measurements on one variable, and each row contains one case. Each row may be treated as a single observation of multiple "variables". 


```r
df <- data.frame(
  name = c("James", "Stevie", "Otis", "Bob", "Levon", "Patti", "Karen"), 
  height = c(180, 170, 175, 190, 168, 160, 165), 
  graduated = c(TRUE, TRUE, FALSE, FALSE, FALSE, TRUE, TRUE),
  gender = factor(c("M", "M", "M", "M", "M", "F", "F")), 
  stringsAsFactors = FALSE)
df
```

```
##     name height graduated gender
## 1  James    180      TRUE      M
## 2 Stevie    170      TRUE      M
## 3   Otis    175     FALSE      M
## 4    Bob    190     FALSE      M
## 5  Levon    168     FALSE      M
## 6  Patti    160      TRUE      F
## 7  Karen    165      TRUE      F
```

Technically, in R a data frame is a list of column vectors that can be of various types, but that have to be of the same length. A **vector** is a "primitive" data object, it is a sequence of data elements of the same basic type: 

* numeric
* character 
* logical


```r
# Numeric vector
height <- c(180, 170, 175, 190, 168, 160, 165)
height
```

```
## [1] 180 170 175 190 168 160 165
```

```r
# Character vector
name <- c("James", "Stevie", "Otis", "Bob", "Levon", "Patti", "Karen")
name
```

```
## [1] "James"  "Stevie" "Otis"   "Bob"    "Levon"  "Patti"  "Karen"
```

```r
# Logical vector
graduated <- c(TRUE, TRUE, FALSE, FALSE, FALSE, TRUE, TRUE)
graduated
```

```
## [1]  TRUE  TRUE FALSE FALSE FALSE  TRUE  TRUE
```

A data frame can include also **factors**, which are vector-like objects used to specify a discrete classification (grouping) of the components of other vectors of the same length. Factor variables are categorical variables that can be either numeric or string variables.


```r
# Factor variable
gender <- factor(c("M", "M", "M", "M", "M", "F", "F"))
gender
```

```
## [1] M M M M M F F
## Levels: F M
```

A data frame is generated by `data.frame()` function. The vectors composing the data frame can be defined inside the `data.frame()` function itself (as seen in the first example) or can be defined outside it. In the following example, we refer to the previously defined vectors (`name`, `height`, `graduated`) and factor (`gender`) to generate a dataframe:


```r
df <- data.frame(name, height, graduated, gender, stringsAsFactors = FALSE)
df
```

```
##     name height graduated gender
## 1  James    180      TRUE      M
## 2 Stevie    170      TRUE      M
## 3   Otis    175     FALSE      M
## 4    Bob    190     FALSE      M
## 5  Levon    168     FALSE      M
## 6  Patti    160      TRUE      F
## 7  Karen    165      TRUE      F
```

The management of character vectors in R requires a detailed explanation. By default, numeric vectors become part of data frames as such, whereas character vectors are transformed into factors whose levels correspond to the vector's unique values. This behaviour is surely effective when character vectors represent categorical variables. However, this behaviour is disturbing when a character vector represents a set of strings which are not necessarily referable to a definite number of modes or to numerous and/or unique modes. This behaviour is managed by the `stringsAsFactors` logical parameter. The default setting is `stringsAsFactors = TRUE` which tells R to transform character vectors into factors inside a data frame; `stringsAsFactors = FALSE` does not change character vectors. 

Furthermore, data imported in R from external sources, such as text files, Excel files or databases, is saved in R as data frame-like objects.

### `tbl_df`: the `dplyr` Data Frame Class

Sometimes data frames have large dimensions. `dplyr` package provide `tbl_df`, which is a wrapper around a data frame that will not accidentally print a lot of data to the screen; indeed tbl objects only print a few rows and all the columns that fit on one screen, describing the rest of it as text.

When the class of data object is not tbl, `tbl_df()` function should be used.  
Let us consider `mtcars`, a dataset included in `datasets` package (automatically loaded at the start of an R session): 


```r
# Example of data frame
data("mtcars")
class(mtcars)
```

```
## [1] "data.frame"
```

```r
# If we do not convert it as a tbl_df, all mtcars rows 
# and columns will be printed when calling mtcars 
dim(mtcars)
```

```
## [1] 32 11
```

```r
mtcars
```

```
##                      mpg cyl  disp  hp drat    wt  qsec vs am gear carb
## Mazda RX4           21.0   6 160.0 110 3.90 2.620 16.46  0  1    4    4
## Mazda RX4 Wag       21.0   6 160.0 110 3.90 2.875 17.02  0  1    4    4
## Datsun 710          22.8   4 108.0  93 3.85 2.320 18.61  1  1    4    1
## Hornet 4 Drive      21.4   6 258.0 110 3.08 3.215 19.44  1  0    3    1
## Hornet Sportabout   18.7   8 360.0 175 3.15 3.440 17.02  0  0    3    2
## Valiant             18.1   6 225.0 105 2.76 3.460 20.22  1  0    3    1
## Duster 360          14.3   8 360.0 245 3.21 3.570 15.84  0  0    3    4
## Merc 240D           24.4   4 146.7  62 3.69 3.190 20.00  1  0    4    2
## Merc 230            22.8   4 140.8  95 3.92 3.150 22.90  1  0    4    2
## Merc 280            19.2   6 167.6 123 3.92 3.440 18.30  1  0    4    4
## Merc 280C           17.8   6 167.6 123 3.92 3.440 18.90  1  0    4    4
## Merc 450SE          16.4   8 275.8 180 3.07 4.070 17.40  0  0    3    3
## Merc 450SL          17.3   8 275.8 180 3.07 3.730 17.60  0  0    3    3
## Merc 450SLC         15.2   8 275.8 180 3.07 3.780 18.00  0  0    3    3
## Cadillac Fleetwood  10.4   8 472.0 205 2.93 5.250 17.98  0  0    3    4
## Lincoln Continental 10.4   8 460.0 215 3.00 5.424 17.82  0  0    3    4
## Chrysler Imperial   14.7   8 440.0 230 3.23 5.345 17.42  0  0    3    4
## Fiat 128            32.4   4  78.7  66 4.08 2.200 19.47  1  1    4    1
## Honda Civic         30.4   4  75.7  52 4.93 1.615 18.52  1  1    4    2
## Toyota Corolla      33.9   4  71.1  65 4.22 1.835 19.90  1  1    4    1
## Toyota Corona       21.5   4 120.1  97 3.70 2.465 20.01  1  0    3    1
## Dodge Challenger    15.5   8 318.0 150 2.76 3.520 16.87  0  0    3    2
## AMC Javelin         15.2   8 304.0 150 3.15 3.435 17.30  0  0    3    2
## Camaro Z28          13.3   8 350.0 245 3.73 3.840 15.41  0  0    3    4
## Pontiac Firebird    19.2   8 400.0 175 3.08 3.845 17.05  0  0    3    2
## Fiat X1-9           27.3   4  79.0  66 4.08 1.935 18.90  1  1    4    1
## Porsche 914-2       26.0   4 120.3  91 4.43 2.140 16.70  0  1    5    2
## Lotus Europa        30.4   4  95.1 113 3.77 1.513 16.90  1  1    5    2
## Ford Pantera L      15.8   8 351.0 264 4.22 3.170 14.50  0  1    5    4
## Ferrari Dino        19.7   6 145.0 175 3.62 2.770 15.50  0  1    5    6
## Maserati Bora       15.0   8 301.0 335 3.54 3.570 14.60  0  1    5    8
## Volvo 142E          21.4   4 121.0 109 4.11 2.780 18.60  1  1    4    2
```

```r
# dplyr version of the same data frame (tbl_df conversion)
require(dplyr)
mtcars_tbl <- tbl_df(mtcars)
class(mtcars_tbl)
```

```
## [1] "tbl_df"     "tbl"        "data.frame"
```

```r
mtcars_tbl
```

```
## # A tibble: 32 Ã— 11
##      mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb
## *  <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl>
## 1   21.0     6 160.0   110  3.90 2.620 16.46     0     1     4     4
## 2   21.0     6 160.0   110  3.90 2.875 17.02     0     1     4     4
## 3   22.8     4 108.0    93  3.85 2.320 18.61     1     1     4     1
## 4   21.4     6 258.0   110  3.08 3.215 19.44     1     0     3     1
## 5   18.7     8 360.0   175  3.15 3.440 17.02     0     0     3     2
## 6   18.1     6 225.0   105  2.76 3.460 20.22     1     0     3     1
## 7   14.3     8 360.0   245  3.21 3.570 15.84     0     0     3     4
## 8   24.4     4 146.7    62  3.69 3.190 20.00     1     0     4     2
## 9   22.8     4 140.8    95  3.92 3.150 22.90     1     0     4     2
## 10  19.2     6 167.6   123  3.92 3.440 18.30     1     0     4     4
## # ... with 22 more rows
```

## Other Data Objects 

The structures of data objects are represented in the following figure:

![](./images/dataStructure.png)


We have already seen data frames, vectors and factors. Let us have a look to matrices, array and lists.

### Matrices

Matrices are generalizations of vectors. Like vectors, matrices need to contain elements of the same kind.


```r
matrix(1:8, nrow = 2, ncol = 4)
```

```
##      [,1] [,2] [,3] [,4]
## [1,]    1    3    5    7
## [2,]    2    4    6    8
```

### Array  

They are similar to matrices but they can be multi-dimensional (more than two dimensions)


```r
z <- array(1:24, dim=c(2,3,4))
z
```

```
## , , 1
## 
##      [,1] [,2] [,3]
## [1,]    1    3    5
## [2,]    2    4    6
## 
## , , 2
## 
##      [,1] [,2] [,3]
## [1,]    7    9   11
## [2,]    8   10   12
## 
## , , 3
## 
##      [,1] [,2] [,3]
## [1,]   13   15   17
## [2,]   14   16   18
## 
## , , 4
## 
##      [,1] [,2] [,3]
## [1,]   19   21   23
## [2,]   20   22   24
```

### Lists

A list is an ordered collection of objects. Each object is a component of the list. Each element of the list can have a different structure. It can be a list itself, a vector, a matrix, an array, a factor or a data frame. A list allows you to gather a variety of (possibly unrelated) objects under one name.


```r
my_list <- list(vec = 1:7, mat = matrix(1:12, ncol = 3),
  lis = list(a = 1, b = letters[1:4]))
my_list
```

```
## $vec
## [1] 1 2 3 4 5 6 7
## 
## $mat
##      [,1] [,2] [,3]
## [1,]    1    5    9
## [2,]    2    6   10
## [3,]    3    7   11
## [4,]    4    8   12
## 
## $lis
## $lis$a
## [1] 1
## 
## $lis$b
## [1] "a" "b" "c" "d"
```


