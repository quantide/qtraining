---
title: "Data Programming Exam"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
show_solution <- FALSE
```

Please reply to the following questions in an R script called "surname_name.R" (e.g., Mario Rossi
will return a file named "rossi_mario.R"). 
Please comments your answers using the symbol: #, before the comments (e.g., # comment).

## Exercise 1

a. (2pt) Create a vector, named `vec`, containing the following values:
1, 5, 12, 14, 6, 78, 68, 34, 34, 32, 56, 75

```{r ex1_a, eval=show_solution, echo=show_solution}
vec <- c(1, 5, 12, 14, 6, 78, 68, 34, 34, 32, 56, 75)
```

b. (2pt) Select the 3-rd element of `vec`.

```{r ex1_b, eval=show_solution, echo=show_solution}
vec[3]
```

c. (2pt) Select all elements of `vec` apart from the 1st.

```{r ex1_c, eval=show_solution, echo=show_solution}
vec[-1]
```

## Exercise 2

Given the following list, named `ll`:

```{r ex2_question1}
ll <- list(numbers = c(2,3,5,6,7), letters = c("z", "x", "y", "t"))
ll
```

a. (2pt) Extract the element named `letters`.

```{r ex2_a, eval=show_solution, echo=show_solution}
ll$letters
```

b. (2pt) Extract the object contained in the first element of `ll`.

```{r ex2_b, eval=show_solution, echo=show_solution}
ll[[1]]
```

c. (2pt) Add the following element to `ll`:

```{r ex2_question2}
 mat <- matrix(1:12, ncol = 3)
```


```{r ex2_c, eval=show_solution, echo=show_solution}
ll$mat <- matrix(1:12, ncol = 3)
ll
```

\clearpage

## Exercise 3

a. (2pt) Generate a data frame, named `df`, corresponding to:

```{r ex3_a, echo=FALSE, comment=''}
df <- data.frame(country = c("Italy", "France", "China", "Japan", "Chile", 
                             "Colombia", "United States", "Canada", "Libya", 
                              "Cameroon"),
                 population = c(59801004, 64668129, 1382323332, 126323715,
                                18131850, 48654392, 324118787, 36286378, 6330159, 
                              	23924407),
                 continent = c("Europe", "Europe", "Asia", "Asia", 
                               "South America", "South America",
                               "North America", "North America", "Africa",
                               "Africa"
                               ), stringsAsFactors = FALSE)
print(df, row.names = FALSE)
```

  Use `data.frame()` function and remember to maintain character vectors as they are, specifiyng `stringsAsFactors = FALSE`.

b. (2pt) Select the third row of `df`.

```{r ex3_b, eval=show_solution, echo=show_solution}
df[3,]
```

c. (2pt) Select the 2-nd and 3-rd columns of `df`

```{r ex3_c, eval=show_solution, echo=show_solution}
df[, c(2,3)]
```


## Exercise 4

a. (3 pt) Import the file _2008.txt_ using the command `read.table()` in a data frame named `flights`. 
Open the text file before importing it to control if the first row contains column names
and to control the field and the decimal separator characters. Remember to not import
the character columns as factors, specifying the argument `stringsAsFactors` as `FALSE`.

```{r ex4_a, eval=show_solution, echo=show_solution}
flights <- read.table(file = "/home/veronica/dev/qtraining/010-rbase/data/2008.txt", header = TRUE, sep = "|", quote = "", dec = ".")
```

This dataset contains information about flight arrival and departure details for all commercial flights within the USA in 2008.

Load `dplyr` library:

```{r ex4_question, message=FALSE}
require(dplyr)
```


b. (1 pt) Convert `flights` data frame to a `tbl_df` using `tbl_df()` function.

```{r ex4_b, eval=show_solution, echo=show_solution}
flights <- flights %>% tbl_df()
```

c. (2 pt) Starting from `flights` data frame, select `ArrDelay` and `Dest` variables and filter the records for which `ArrDelay` variable is greater than 120.

```{r ex4_c, eval=show_solution, echo=show_solution}
flights %>% select(ArrDelay, Dest) %>% filter(ArrDelay > 120)
```

d. (2 pt) Starting from `flights` data frame, compute the mean delay at departure (`DepDelay` variable) groupig by `Origin` variable. Remember to add `na.rm=TRUE option` to mean computation.

```{r ex4_d, eval=show_solution, echo=show_solution}
flights %>% group_by(Origin) %>% summarise(mean=mean(DepDelay, na.rm=TRUE))
```

\clearpage

## Exercise 5

Load `mtcars` dataset in this way:

```{r ex5_question1}
data("mtcars")
```

`mtcars` data was extracted from the 1974 Motor Trend US magazine, and comprises fuel consumption and 10 aspects of automobile design and performance for 32 automobiles (1973â€“74 models).

```{r ex5_question2}
head(mtcars)
```

To achieve more information about `mtcars` dataset type `?mtcars` on R console.

Load `ggplot2` library:

```{r ex5_question3, message=FALSE}
require(ggplot2)
```

a. (1 pt) Calculate the number of rows and columns of the `mtcars` dataset.

```{r ex5_a, eval=show_solution, echo=show_solution}
dim(mtcars) # or nrow(mtcars) and ncol(mtcars)
```

b. (3 pt) Build a scatterplot to analyze the relationship between `mpg` and `wt` variables. Use `ggplot()` and `geom_point()` functions.

```{r ex5_b, eval=show_solution, echo=show_solution}
ggp <- ggplot(data = mtcars, mapping = aes(x=wt, y=mpg)) + 
  geom_point()
print(ggp)
```

c. (3 pt) Represent the distribution of `mpg` variable with an histogram. Use `ggplot()` and `geom_histogram()` functions.

```{r ex5_c, eval=show_solution, echo=show_solution}
ggp <- ggplot(data = mtcars, mapping = aes(x=mpg)) + 
  geom_histogram()
print(ggp)
```








